<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="customisepage.css" />
     

    <title>Timer Settings!</title>
  </head>
  <body>
     
          <table>
            <tr> 
          <td>
            <form autocomplete="off" onsubmit="onFormSubmit()">
                
       

         <div> 
          <p><label for="name">Name:</label></p>
          <input type="text" name="name" id="name"value=""  placeholder="enter your name"/>
           </div>
           <div>
           <p><label for="focus">Focus:</label></p>
          <input type="text" name="focus" id="focus" value="" placeholder="min" />
            </div>
            <div>
          <p><label for="break">Break:</label></p>
          <input type="text" name="break" id="break" value="" placeholder="min" />
            </div>
            <div>
           <p><label for="cycle">Cycles:</label></p>
       
          <input type="text"name="cycles"id="cycles"value=""placeholder="cycles"/>
          </div>
         <div class="form action--button">
             <input type='submit' value="Submit">
             <input type='reset' value="Reset">
         
 </div>
</form>
          <td>
            <table class="list" id="Table">
            <thead>
          <tr>
    
    
        <thead>
          <tr>
          <th>Name</th>
          <th>Focus</th>
          <th>Break</th>
          <th>Cycle</th>
        </tr>
        </thead>
        <tbody> 

        
        </tbody>
      </table>
    </td>
  </td>
</tr>
</table>
  </body>
</html>
        

      
<script>
  var selectedRow = null;
  var tableData = JSON.stringify(localStorage.getItem('tableData'))|| [];
  function onFormSubmit(){
   event.preventDefault();
   var formData =readFormData();
   if(selectedRow===null){
    insertNewRecord(formData);
   }
   else{
    updateRecord(formData);
  }
   resetForm();
   saveToLocalStorage();
   console.log(JSON.parse(localStorage.getItem('tableData')));
}

  ///Retrieve data
  function readFormData(){
    var formData ={};

formData['name'] = document.getElementById("name").value;
formData['focus'] = document.getElementById("focus").value;
formData['break'] = document.getElementById("break").value;
formData['cycles'] = document.getElementById("cycles").value;
 return formData;
  }

  //Insert data

function insertNewRecord(data){
   var table =document.getElementById('Table').getElementsByTagName('tbody')[0];
   var newRow = table.insertRow(table.rows.length);
   var cell1 =newRow.insertCell(0);
   cell1.innerHTML=data.name;
   var cell2 =newRow.insertCell(1);
   cell2.innerHTML=data.focus;
   var cell3 =newRow.insertCell(2);
   cell3.innerHTML=data.break;
   var cell4 =newRow.insertCell(3);
   cell4.innerHTML=data.cycles;
   var cell5 =newRow.insertCell(4);
   cell5.innerHTML=`<button onClick>"onEdit(this)">Edit</button> <button>Delete</button>`
}
   //Edit data
   function onEdit(td){
    selectedRow=td.parentElement.parentElement;
    document.getElementById('name').value=selectedRow.cells[0].innerHTML;
    document.getElementById('focus').value=selectedRow.cells[1].innerHTML;
    document.getElementById('break').value=selectedRow.cells[2].innerHTML;
    document.getElementById('cycles').value=selectedRow.cells[3].innerHTML;
   }

   function updateRecord(formData){
    selectedRow.cell[0].innerHTML = formData.name;
    selectedRow.cell[1].innerHTML = formData.focus;
    selectedRow.cell[2].innerHTML = formData.break;
    selectedRow.cell[3].innerHTML = formData.cycles;
    selectedRow=null;
   }
   //Delete data
   function onDelete(td){
    if(confirm("Do you want to delete this record")){
      row =td.parentElement.parentElement;
      document.getElementById('Table').deleteRow(row.rowIndex);
    
    resetForm();
    saveToLocalStorage();
   }
  }

   //Reset data
   function resetForm(){
    document.getElementById('name').value='';
    document.getElementById('focus').value='';
    document.getElementById('break').value='';
    document.getElementById('cycles').value='';
    selectedRow=null;
   }
     // Save to local storage
     function saveToLocalStorage() {
      var table = document.getElementById("Table").getElementsByTagName("tbody")[0];
      var tableData = [];
      for (var i = 0; i < table.rows.length; i++) {
        var row = table.rows[i];
        var rowData = {
          name: row.cells[0].innerText,
          focus: row.cells[1].innerText,
          break: row.cells[2].innerText,
          cycles: row.cells[3].innerText
        };
        tableData.push(rowData);
      }
      localStorage.setItem('tableData', JSON.stringify(tableData));
    }

    // Load from local storage
    function loadFromLocalStorage() {
      var tableData = JSON.parse(localStorage.getItem('tableData'));
      if (tableData) {
        var table = document.getElementById("Table").getElementsByTagName("tbody")[0];
        for (var i = 0; i < tableData.length; i++) {
          var newRow = table.insertRow(table.rows.length);
          var cell1 = newRow.insertCell(0);
          cell1.innerHTML = tableData[i].name;
          var cell2 = newRow.insertCell(1);
          cell2.innerHTML = tableData[i].focus;
          var cell3 = newRow.insertCell(2);
          cell3.innerHTML = tableData[i].break;
          var cell4 = newRow.insertCell(3);
          cell4.innerHTML = tableData[i].cycles;
          var cell5 = newRow.insertCell(4);
          cell5.innerHTML = `<button onclick="onEdit(this)">Edit</button> <button onclick="onDelete(this)">Delete</button>`;
        }
      }
    }

    // Load data from local storage when the page loads
    window.onload = loadFromLocalStorage;
</script>
     
  </body>
</html>
