<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="customisepage.css" />
    <script src="customise.js" defer></script>
    <title>Timeout!</title>
  </head>
  <body>
    <div class="category">
      <div class="button-wrapper" id="studyButton">
        <button class="pill" type="button">
          <span class="icon">&#x1F4D6;</span>
          <div class="text-content">
            <span class="main-text">Study</span>
          </div>
          <span class="arrow">&#9662;</span>
        </button>
        <div id="studySubButtons" class="sub-buttons" style="display: none">
          <button class="pill" id="studyFocusButton" type="button">
            Focus
          </button>
          <button class="pill" id="studyBreakButton" type="button">
            Break
          </button>
        </div>
      </div>

      <div class="button-wrapper" id="exerciseButton">
        <button class="pill" type="button">
          <span class="icon">&#x1F3CB;</span>
          <div class="text-content">
            <span class="main-text">Exercise</span>
          </div>
          <span class="arrow">&#9662;</span>
        </button>
        <div id="exerciseSubButtons" class="sub-buttons" style="display: none">
          <button class="pill" id="exerciseFocusButton" type="button">
            Focus
          </button>
          <button class="pill" id="exerciseBreakButton" type="button">
            Break
          </button>
        </div>
      </div>

      <div class="button-wrapper" id="gamingButton">
        <button class="pill" type="button">
          <span class="icon">&#127918;</span>
          <div class="text-content">
            <span class="main-text">Gaming</span>
          </div>
          <span class="arrow">&#9662;</span>
        </button>
        <div id="gamingSubButtons" class="sub-buttons" style="display: none">
          <button class="pill" id="gamingFocusButton" type="button">
            Focus
          </button>
          <button class="pill" id="gamingBreakButton" type="button">
            Break
          </button>
        </div>
      </div>

      <div class="button-wrapper" id="doschoolworkButton">
        <button class="pill" type="button">
          <span class="icon">&#x1F4DA;</span>
          <div class="text-content">
            <span class="main-text">Do school work</span>
          </div>
          <span class="arrow">&#9662;</span>
        </button>
        <div
          id="schoolworkSubButtons"
          class="sub-buttons"
          style="display: none"
        >
          <button class="pill" id="schoolworkFocusButton" type="button">
            Focus
          </button>
          <button class="pill" id="schoolworkBreakButton" type="button">
            Break
          </button>
        </div>
      </div>
    </div>

    <div class="categ-container">
      <select id="timeselect" class="dropdown">
        <option value="5">5 min</option>
        <option value="10">10 min</option>
        <option value="20">20 min</option>
        <option value="30">30 min</option>
      </select>
    </div>

    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        const timeselect = document.getElementById("timeselect");

        function toggleDropdown() {
          if (timeselect.classList.contains("show")) {
            timeselect.classList.remove("show");
          } else {
            timeselect.classList.add("show");
          }
        }

        function showDropdown(buttonId) {
          timeselect.setAttribute("data-category", buttonId);
          toggleDropdown();
        }

        function saveTime(category, time) {
          localStorage.setItem(category, time); /// Save time
          console.log(`${category} time saved:`, time);
        }

        function showSubButtons(subButtonsId) {
          document.querySelectorAll(".sub-buttons").forEach((element) => {
            element.style.display = "none";
          });
          document.getElementById(subButtonsId).style.display = "block";
        }

        document
          .getElementById("studyButton")
          .addEventListener("click", function () {
            showSubButtons("studySubButtons");
          });

        document
          .getElementById("exerciseButton")
          .addEventListener("click", function () {
            showSubButtons("exerciseSubButtons");
          });

        document
          .getElementById("gamingButton")
          .addEventListener("click", function () {
            showSubButtons("gamingSubButtons");
          });

        document
          .getElementById("doschoolworkButton")
          .addEventListener("click", function () {
            showSubButtons("schoolworkSubButtons");
          });

        document
          .getElementById("studyFocusButton")
          .addEventListener("click", function () {
            showDropdown("studyFocusTime");
          });

        document
          .getElementById("studyBreakButton")
          .addEventListener("click", function () {
            showDropdown("studyBreakTime");
          });

        document
          .getElementById("exerciseFocusButton")
          .addEventListener("click", function () {
            showDropdown("exerciseFocusTime");
          });

        document
          .getElementById("exerciseBreakButton")
          .addEventListener("click", function () {
            showDropdown("exerciseBreakTime");
          });

        document
          .getElementById("gamingFocusButton")
          .addEventListener("click", function () {
            showDropdown("gamingFocusTime");
          });

        document
          .getElementById("gamingBreakButton")
          .addEventListener("click", function () {
            showDropdown("gamingBreakTime");
          });

        document
          .getElementById("schoolworkFocusButton")
          .addEventListener("click", function () {
            showDropdown("schoolworkFocusTime");
          });

        document
          .getElementById("schoolworkBreakButton")
          .addEventListener("click", function () {
            showDropdown("schoolworkBreakTime");
          });

        timeselect.addEventListener("change", function () {
          const selectedTime = this.value;
          const category = this.getAttribute("data-category");

          saveTime(category, selectedTime);
          toggleDropdown();
        });
      });
    </script>
  </body>
</html>
